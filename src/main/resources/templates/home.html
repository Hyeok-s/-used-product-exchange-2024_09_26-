<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Google Fonts -->
    <link href='http://fonts.googleapis.com/css?family=Titillium+Web:400,200,300,700,600' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Roboto+Condensed:400,700,300' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Raleway:400,100' rel='stylesheet' type='text/css'>

    <!-- Bootstrap -->
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">

    <!-- Font Awesome -->
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">

    <!-- css -->
    <link rel="stylesheet" href="/css/style.css">
    <script src="http://code.jquery.com/jquery-1.11.2.min.js"></script>
    <style>

    </style>


</head>
<body onload="loadContent('/product/product/' + 'O')">
<!-- 상단 바 -->
<div class="header-area">
    <div class="container">
        <div class="row">
            <div class="col-md-8">
                <div class="user-menu">
                    <ul>
                        <!-- 로그인 여부에 따라 다른 버튼 표시 -->
                        <li th:if="${session.loggedInUser == null}">
                            <a href="/demo/login"><i class="fa fa-user"></i>로그인</a>
                        </li>
                        <li th:if="${session.loggedInUser == null}">
                            <a href="/demo/signup"><i class="fa fa-heart"></i>회원가입</a>
                        </li>
                        <li th:if="${session.loggedInUser == null}">
                            <a href="/demo/test"><i class="fa fa-heart"></i>테스트</a>
                        </li>
                        <li th:if="${session.loggedInUser != null}">
                            <a href="/demo/mypage"><i class="fa fa-user"></i>마이페이지</a>
                        </li>
                        <li th:if="${session.loggedInUser != null}">
                            <a href="/demo/logout"><i class="fa fa-user"></i>로그아웃</a>
                        </li>
                        <li th:if="${session.loggedInUser != null and session.loggedInUser.memberRole == 'admin'}">
                            <a href="/Admin/admin"><i class="fa fa-user"></i>관리자페이지</a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- 상단 밑 사진 등 바 -->
<div class="site-branding-area">
    <div class="container">
        <div class="row">
            <div class="col-sm-6">
                <div class="logo">
                    <h1><a href="index.html">T<span>est</span></a></h1>
                </div>
            </div>
            <div class="col-sm-6">
                <div class="shopping-item">
                    <a href="/product/upload"><i class="fa fa-pencil-square-o">-upload</i> <span class="product-count">0</span></a>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- 네비게이션 바 -->
<div class="mainmenu-area">
    <div class="container">
        <div class="row">
            <div class="navbar-collapse collapse">
                <ul class="nav navbar-nav">
                    <li><a href="#" onclick="loadContent('/product/product/' + 'O')">상품확인</a></li>
                    <li><a href="#" onclick="loadContent('/product/heart)">내찜상품</a></li>
                    <li><a href="#" onclick="loadContent('/ask')">문의하기</a></li>
                    <li><a href="#">도움말</a></li>
                </ul>
            </div>
        </div>
    </div>
</div>

<!-- 사이드바 -->
<div class="scontainer">
    <div class="sidebar">
        <ul class="menu">
            <li><a href="#" onclick="loadContent('/product/product/' + 'O')">전체</a></li>
            <li>
                <a href="#" onclick="loadContentByCategory('/product/category/', '디지털/가전')">디지털/가전</a>
                <ul class="sub">
                    <li><a href="#" onclick="loadContentBySubCategory('/product/subcategory/', '가전제품')">> 가전제품</a></li>
                    <li><a href="#" onclick="loadContentBySubCategory('/product/subcategory/', '전자기기')">> 전자기기</a></li>
                </ul>
            </li>
            <li>
                <a href="#" onclick="loadContentByCategory('/product/category/', '의류')">의류</a>
                <ul class="sub">
                    <li><a href="#" onclick="loadContentBySubCategory('/product/subcategory/', '유아의류')">> 유아의류</a></li>
                    <li><a href="#" onclick="loadContentBySubCategory('/product/subcategory/', '남성의류')">> 남성의류</a></li>
                    <li><a href="#" onclick="loadContentBySubCategory('/product/subcategory/', '여성의류')">> 여성의류</a></li>
                    <li><a href="#" onclick="loadContentBySubCategory('/product/subcategory/', '신발')">> 신발</a></li>
                </ul>
            </li>
            <li>
                <a href="#" onclick="loadContentByCategory('/product/category/', '도서')">도서</a>
                <ul class="sub">
                    <li><a href="#" onclick="loadContentBySubCategory('/product/subcategory/', '남성패션잡화')">> 남성패션잡화</a></li>
                    <li><a href="#" onclick="loadContentBySubCategory('/product/subcategory/', '여성패션잡화')">> 여성패션잡화</a></li>
                    <li><a href="#" onclick="loadContentBySubCategory('/product/subcategory/', '유아도서')">> 유아도서</a></li>
                    <li><a href="#" onclick="loadContentBySubCategory('/product/subcategory/', '소설/만화책')">> 소설/만화책</a></li>
                </ul>
            </li>
            <li>
                <a href="#" onclick="loadContentByCategory('/product/category/', '취미')">취미</a>
                <ul class="sub">
                    <li><a href="#" onclick="loadContentBySubCategory('/product/subcategory/', '미용용품')">> 미용용품</a></li>
                    <li><a href="#" onclick="loadContentBySubCategory('/product/subcategory/', '스포츠용품')">> 스포츠용품</a></li>
                    <li><a href="#" onclick="loadContentBySubCategory('/product/subcategory/', '게임')">> 게임</a></li>
                </ul>
            </li>
            <li>
                <a href="#" onclick="loadContentByCategory('/product/category/', '반려용품')">반려용품</a>
                <ul class="sub">
                    <li><a href="#" onclick="loadContentBySubCategory('/product/subcategory/', '고양이')">> 고양이</a></li>
                    <li><a href="#" onclick="loadContentBySubCategory('/product/subcategory/', '강아지')">> 강아지</a></li>
                    <li><a href="#" onclick="loadContentBySubCategory('/product/subcategory/', '기타동물')">> 기타동물</a></li>
                </ul>
            </li>
            <li><a href="#" onclick="loadContentByCategory('/product/category/', '기타물품')">기타물품</a></li>
        </ul>
    </div>

    <!-- 메인 -->
    <div class="mainContent" id="mainContent">
    </div>
</div>

<script>
    function loadContent(url) {
        fetch(url)
        .then(response => response.text())
        .then(html => {
            document.getElementById('mainContent').innerHTML = html;
        })
        .catch(err => console.warn('Something went wrong.', err));
    }

     // 대분류에 따라 URL을 받아 로드하는 함수
    function loadContentByCategory(url, category) {
        category = category.replace(/\//g, '_');
        url = url + category;
        console.log(url);
        fetch(url)
        .then(response => response.text())
        .then(html => {
            document.getElementById('mainContent').innerHTML = html;
        })
        .catch(err => console.warn('Something went wrong.', err));
    }

    // 소분류에 따라 URL을 받아 로드하는 함수
    function loadContentBySubCategory(url, subcategory) {
        subcategory = subcategory.replace(/\//g, '_');
        url = url + subcategory;
        console.log(url);
        fetch(url)
        .then(response => response.text())
        .then(html => {
            document.getElementById('mainContent').innerHTML = html;
        })
        .catch(err => console.warn('Something went wrong.', err));
    }
</script>
<script>
    $(document).ready(function() {
        $(".sub").hide(); // 기본적으로 서브 메뉴 숨기기

        // 대분류 클릭 시
        $(".menu > li > a").click(function(event) {
            // 기본 링크 기능 방지
            event.preventDefault();

            // 모든 대분류 메뉴에서 active 클래스 제거
            $(".menu > li > a").removeClass("active");

            // 클릭한 대분류 메뉴 항목에 active 클래스 추가
            $(this).addClass("active");

            // 서브 메뉴가 열려 있으면 닫기
            let $subMenu = $(this).siblings(".sub");
            if ($subMenu.is(":visible")) {
                $subMenu.slideUp("fast");
            } else {
                // 모든 서브 메뉴 닫기
                $(".sub").slideUp("fast");
                // 클릭한 메뉴의 서브 메뉴 열기
                $subMenu.slideDown("fast");
            }

            // 소분류의 active 클래스 제거
            $(".sub > li > a").removeClass("active"); // 소분류 색상 초기화
        });

        // 소분류 클릭 시
        $(".sub > li > a").click(function(event) {
            // 기본 링크 기능 방지
            event.preventDefault();

            // 모든 소분류 메뉴에서 active 클래스 제거
            $(".sub > li > a").removeClass("active");

            // 클릭한 소분류 메뉴 항목에 active 클래스 추가
            $(this).addClass("active");
        });
    });
</script>
</body>
</html>
