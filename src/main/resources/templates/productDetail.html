<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
  <link rel="stylesheet" href="/css/style.css?after">
  <link rel="stylesheet" href="/static/css/style.css">
  <meta charset="UTF-8">
  <title>제품 상세 정보</title>
  <style>
    /* 전체 화면 레이아웃 */
    body {
      display: flex;
      justify-content: center;
      align-items: center;
      font-family: Arial, sans-serif;
      background-color: #f3f3f3;
      margin: 0;
      padding: 0;
    }

    .container {
      display: flex;
      width: 90%;
      max-width: 1000px;
      background-color: #fff;
      border-radius: 8px;
      overflow: hidden;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
    }

    /* 왼쪽 상세 정보 스타일 */
    .details {
      flex: 1.2;
      padding: 20px;
      background-color: #f8f8f8;
    }

    .details h1 {
      font-size: 1.5em;
      color: #333;
      margin-bottom: 20px;
    }

    .slider {
      position: relative;
      width: 100%;
      max-width: 350px;
      height: 350px;
      margin-bottom: 20px;
      overflow: hidden;
      border-radius: 8px;
    }

    .slides {
      display: flex;
      transition: transform 0.5s ease;
    }

    .slides img {
      width: 100%;
      object-fit: cover;
    }

    .arrow {
      position: absolute;
      top: 50%;
      width: 40px;
      height: 40px;
      background-color: rgba(0, 0, 0, 0.4);
      color: white;
      border: none;
      font-size: 1.5em;
      cursor: pointer;
      transform: translateY(-50%);
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
    }

    .arrow.left {
      left: 10px;
    }

    .arrow.right {
      right: 10px;
    }

    .product-info p {
      margin: 10px 0;
      color: #666;
    }

    /* 오른쪽 구매하기 폼 스타일 */
    .purchase {
      flex: 1;
      padding: 20px;
      background-color: #333;
      color: #fff;
    }

    .purchase h2 {
      color: #fff;
      margin-bottom: 20px;
      font-size: 1.2em;
    }

    .purchase label {
      color: #ddd;
    }

    .purchase input,
    .purchase select,
    .purchase textarea {
      width: 100%;
      padding: 8px;
      margin-top: 5px;
      margin-bottom: 15px;
      border-radius: 5px;
      border: none;
    }

    .purchase button[type="submit"] {
      width: 100%;
      padding: 12px;
      background-color: #ff6b6b;
      border: none;
      border-radius: 5px;
      color: white;
      font-size: 1em;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }

    .purchase button[type="submit"]:hover {
      background-color: #ff4d4d;
    }
  </style>
</head>
<body>

<!-- 상단 밑 사진 등 바 -->
<div class="site-branding-area">
  <div class="container">
    <div class="row">
      <div class="col-sm-6">
        <div class="logo">
          <h1 class="main"><a href="/">중고물품<span>&nbsp중개거래</span></a></h1>
        </div>
      </div>
      <div class="col-sm-6">
        <div class="shopping-item">
          <a href="/product/upload"><i class="fa fa-pencil-square-o">-upload</i> <span class="product-count">+</span></a>
        </div>
      </div>
    </div>
  </div>
</div>




<div class="container">
  <!-- 상세정보 섹션 -->
  <div class="details">
    <h1>제품 상세 정보</h1>
    <div class="slider">
      <div class="slides" id="slides">
        <img th:src="@{/uploads/} + ${product.pic}" alt="Product Image">
        <img th:src="@{/uploads/} + ${product.pic1}" alt="Product Image" th:if="${product.pic1}">
        <img th:src="@{/uploads/} + ${product.pic2}" alt="Product Image" th:if="${product.pic2}">
      </div>
      <button class="arrow left" id="leftArrow" onclick="changeSlide(-1)">&#10094;</button>
      <button class="arrow right" id="rightArrow" onclick="changeSlide(1)">&#10095;</button>
    </div>
    <div class="product-info">
      <p><strong>상품명:</strong> <span th:text="${product.pName}">상품명</span></p>
      <p><strong>가격:</strong> <span th:text="${product.pPrice}">상품가격</span></p>
      <p><strong>설명:</strong> <span th:text="${product.pContent}">상품설명</span></p>
      <p><strong>상태:</strong> <span>판매중</span></p>
    </div>
  </div>

  <!-- 구매하기 섹션 -->
  <div class="purchase">
    <h2>구매하기</h2>
    <form method="post" th:action="@{/order/submit}">
      <label>이름:</label>
      <input type="text" th:value="${memberName}" readonly>

      <label>휴대폰 번호:</label>
      <input type="text" th:value="${memberPhone}">

      <label>이메일:</label>
      <input type="email" th:value="${memberEmail}" readonly>

      <label>주소:</label>
      <select name="shoppingAddress" required>
        <option value="" disabled selected>주소를 선택하세요</option>
        <li th:each="address : ${addresses}">
          <option th:value="${address.address} + ' ' + ${address.detailAddress}">[[${address.address}]] [[${address.detailAddress}]]</option>
        </li>
      </select>

      <label>배송 메모:</label>
      <textarea name="shoppingMemo" placeholder="배송 메모를 입력하세요"></textarea>

      <label>결제 방법:</label>
      <div>
        <input type="radio" name="paymentMethod" value="card" id="card" required />
        <label for="card">카드 결제</label>
      </div>
      <div>
        <input type="radio" name="paymentMethod" value="kakao" id="kakao" />
        <label for="kakao">카카오페이 결제</label>
      </div>
      <div>
        <input type="radio" name="paymentMethod" value="toss" id="toss" />
        <label for="toss">토스 결제</label>
      </div>

      <input type="hidden" name="productId" th:value="${product.id}"/>
      <button type="submit">주문하기</button>
    </form>
  </div>
</div>

<script>
  let currentSlide = 0;

  function changeSlide(direction) {
    const slides = document.getElementById('slides');
    const totalSlides = slides.children.length;
    currentSlide = (currentSlide + direction + totalSlides) % totalSlides;
    slides.style.transform = `translateX(-${currentSlide * 100}%)`;
  }

  window.onload = function() {
    const totalSlides = document.getElementById('slides').children.length;
    if (totalSlides > 1) {
      document.getElementById('leftArrow').style.display = 'block';
      document.getElementById('rightArrow').style.display = 'block';
    }
  };
</script>

</body>
</html>
